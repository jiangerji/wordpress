<?php   class LatestComments extends WP_Widget{       function LatestComments(){           $widget_ops = array('classname'=>'widget_LatestComments','description'=>'显示近期评论');           $this->WP_Widget(false,'PCKr 近期评论',$widget_ops);       }       //表单       function form($instance){           $instance = wp_parse_args((array)$instance,array(           'title'=>'PCKr 近期评论','showPosts'=>10           ));           $title = htmlspecialchars($instance['title']);           $LatestComments = htmlspecialchars($instance['LatestComments']);           $output = '<table>';           $output .= '</td></tr><tr><td>显示数量：</td><td>';           $output .= '<input id="'.$this->get_field_id('LatestComments') .'" name="'.$this->get_field_name('LatestComments').'" type="text" value="'.$instance['LatestComments'].'" />';           $output .= '</td></tr></table>';           echo $output;       }              function update($new_instance,$old_instance){           $instance = $old_instance;           $instance['LatestComments'] = strip_tags(stripslashes($new_instance['LatestComments']));           return $instance;       }              function widget($args,$instance){           extract($args);           $title = apply_filters('widget_title',empty($instance['title']) ? '&nbsp;' : $instance['title']);           $LatestComments = empty($instance['LatestComments']) ? 10 : $instance['LatestComments'];              $this->get_LatestComments($LatestComments);       }       function get_LatestComments($LatestComments){   ?><section id="sidebar-comments">				<h3>近期评论</h3>				<div class="sidebar-comments__list"><?php$show_comments = $LatestComments; //评论数量$my_email = get_bloginfo ('admin_email'); //获取博主自己的email$i = 1;$comments = get_comments('number=100&status=approve&type=comment'); //取得前200个评论，如果你每天的回复量超过200可以适量加大foreach ($comments as $rc_comment) {	if ($rc_comment->comment_author_email != $my_email) {		?>		<div class="comment-1">      <div class="postmeta"><a href="<?php echo get_permalink($rc_comment->comment_post_ID); ?>#comment" class="uname user_u1398846746" data-name="<?php echo $rc_comment->comment_author; ?>" target="_blank"><?php echo $rc_comment->comment_author; ?></a></div>      <div class="sidebar-comments__comment">        <?php echo convert_smilies($rc_comment->comment_content); ?>      </div>      <div class="sidebar-comments__title">        <p>评论于<a href="<?php echo get_permalink($rc_comment->comment_post_ID); ?>"><?php echo get_the_title($rc_comment->comment_post_ID); ?></a></p>      </div>		</div>		<?php		if ($i == $show_comments) break; //评论数量达到退出遍历		$i++;	} // End if} //End foreach?>				</div></section><?php     }     }     function LatestComments(){       register_widget('LatestComments');   }   add_action('widgets_init','LatestComments');   