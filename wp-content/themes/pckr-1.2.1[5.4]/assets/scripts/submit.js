jQuery(document).ready(function(A){if(A("#unedit-bg").attr("unable")){A("#newsubmit").attr("disabled","disabled")}var H=A("#tags-preview"),B=function(){var D="";A(".tag-one span").each(function(){D+=A(this).text()+","});A("#post-tags").val(D);var F=A("#post-tags").val(),E=F.trim().replace(/\s{2,}/ig,"").split(",");A("#sidebar-tags a").each(function(){var G=E.indexOf(A(this).text());if(G>-1){A(this).addClass("selected")}else{A(this).removeClass("selected")}})},C=function(){var F=A.trim(A("#post-tags").val()),E=F.replace(/\s{2,}/ig,"").split(","),D=E.length;for(var G=0;G<D;G++){if(E[G]!=""){H.append('<li class="tag-one"><span>'+E[G]+'</span><a href="#" class="tag-delete">x</a></li>')}}A("#sidebar-tags a").each(function(){var J=A.inArray(A(this).text(),E);if(J>-1){A(this).addClass("selected")}else{A(this).removeClass("selected")}})};C();A("#sidebar-tags a").click(function(E){E.preventDefault();E.returnValue=false;var D=A(this),F=D.text();if(D.hasClass("selected")){return false}H.append('<li class="tag-one"><span>'+F+'</span><a href="#" class="tag-delete">x</a></li>');B();return false});A(".tag-delete").live("click",function(D){D.preventDefault();D.returnValue=false;A(this).parent().remove();B();return false});A("#inputtags").focus(function(){var D=A(this).val();A(this).keydown(function(G){var K=G.which;m=A(this).val();if(K==13||K==188){G.preventDefault();G.returnValue=false;var F=A.trim(m);if(F!=""){A('<li class="tag-one"><span>'+F+'</span><a href="#" class="tag-delete">x</a></li>').appendTo(H);A(this).val("");B()}}else{if(K==46||K==8){if(m==""){var E=A("#tags-preview li").length;if(E>0){A("#tags-preview li:last").remove();B()}}}}});A(this).keyup(function(){var F=A(this).val();if(F.indexOf("，")!=-1){var E=/，/g;F=A.trim(F.replace(E,""));A(this).val(F);if(F!=""){A('<li class="tag-one"><span>'+F+'</span><a href="#" class="tag-delete">x</a></li>').appendTo(H);A(this).val("");B()}}})}).blur(function(){z=A(this).val();licount=A("#tags-preview li").length;if(z==""){if(licount==0){A(this).val(thisval).css("color","#999")}else{return false}}else{A('<li class="tag-one"><span>'+z+'</span><a href="#" class="tag-delete">x</a></li>').appendTo(H);A(this).val("");B()}})});